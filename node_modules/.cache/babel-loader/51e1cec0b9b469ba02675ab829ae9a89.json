{"remainingRequest":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/babel-loader/lib/index.js!/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/src/components/modals/registroUsuarioModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/src/components/modals/registroUsuarioModal.vue","mtime":1645809942000},{"path":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/babel.config.js","mtime":1645809942000},{"path":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/cache-loader/dist/cjs.js","mtime":1728489819214},{"path":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/babel-loader/lib/index.js","mtime":1728489820331},{"path":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/cache-loader/dist/cjs.js","mtime":1728489819214},{"path":"/Users/juann1095/Documents/GitHub/Sistema Integral de Formación Continua 3.0b/node_modules/vue-loader/lib/index.js","mtime":1728489820388}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZWdpc3Ryb1VzdWFyaW9Nb2RhbCIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBheGlvc1Byb3A6IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiYmVhcmVyICIgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgfQogICAgICB9LAogICAgICBwZXJmaWxlczogW10sCiAgICAgIGNhbWJpYVBhc3M6IGZhbHNlLAogICAgICBsYWJlbElEOiAiIiwKICAgICAgcGVyZmlsU2VsZWN0ZWQ6ICIiLAogICAgICB1c3VhcmlvOiB7CiAgICAgICAgdXN1YXJpbzogIiIsCiAgICAgICAgbm9tYnJlOiAiIiwKICAgICAgICBwcmltZXJfYXBlbGw6ICIiLAogICAgICAgIHNlZ3VuZG9fYXBlbGw6ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICB0ZWxlZm9ub19maWpvOiAwLAogICAgICAgIHRlbGVmb25vX21vdmlsOiAwLAogICAgICAgIHByZXBhcmFjaW9uOiAiIiwKICAgICAgICBwZXJmaWw6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0UGVyZmlsZXMoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtKCkgewogICAgICBpZiAodGhpcy4kcGFyZW50LnVzdWFyaW9TZWxlY3RlZCkgewogICAgICAgIGF4aW9zLnB1dChwcm9jZXNzLmVudi5WVUVfQVBQX1VSTCArIGAvdXN1YXJpb3MvZWRpdC9gICsgdGhpcy51c3VhcmlvLl9pZCwgdGhpcy51c3VhcmlvLCB0aGlzLmF4aW9zUHJvcCkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy4kYnZNb2RhbC5tc2dCb3hPayhyZXMuZGF0YSk7CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94T2soZXJyKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcy5wb3N0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMICsgYC91c3Vhcmlvcy9gLCB0aGlzLnVzdWFyaW8sIHRoaXMuYXhpb3NQcm9wKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy4kYnZNb2RhbC5tc2dCb3hPayhyZXMuZGF0YSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94T2soZXJyKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy4kcGFyZW50Lm1vZGFsUmVnaXN0cm9Vc3VhcmlvID0gZmFsc2U7CiAgICB9LAoKICAgIGdldFBlcmZpbGVzKCkgewogICAgICBheGlvcy5nZXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkwgKyAiL3BlcmZpbGVzIiwgdGhpcy5heGlvc1Byb3ApLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnBlcmZpbGVzID0gcmVzLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5wZXJmaWxlcyk7CiAgICAgIH0pOwogICAgfSwKCiAgICBvbk9wZW5Nb2RhbCgpIHsKICAgICAgdGhpcy5jYW1iaWFQYXNzID0gZmFsc2U7CgogICAgICBpZiAodGhpcy4kcGFyZW50LnVzdWFyaW9TZWxlY3RlZCkgewogICAgICAgIHRoaXMudXN1YXJpbyA9IHRoaXMuJHBhcmVudC51c3VhcmlvU2VsZWN0ZWQ7CiAgICAgICAgdGhpcy51c3VhcmlvLmhhc2ggPSAiIjsKICAgICAgICB0aGlzLmxhYmVsSUQgPSB0aGlzLnVzdWFyaW8uX2lkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubGFiZWxJRCA9ICIiOwogICAgICAgIHRoaXMudXN1YXJpbyA9IHsKICAgICAgICAgIHVzdWFyaW86ICIiLAogICAgICAgICAgbm9tYnJlOiAiIiwKICAgICAgICAgIHByaW1lcl9hcGVsbDogIiIsCiAgICAgICAgICBzZWd1bmRvX2FwZWxsOiAiIiwKICAgICAgICAgIGVtYWlsOiAiIiwKICAgICAgICAgIHRlbGVmb25vX2Zpam86IDAsCiAgICAgICAgICB0ZWxlZm9ub19tb3ZpbDogMCwKICAgICAgICAgIHByZXBhcmFjaW9uOiAiIiwKICAgICAgICAgIHBlcmZpbDogIiIKICAgICAgICB9OwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AAEA;EACAA,4BADA;;EAEAC;IACA;MACAC;QACAC;UACAC;QADA;MADA,CADA;MAMAC,YANA;MAOAC,iBAPA;MAQAC,WARA;MASAC,kBATA;MAUAC;QACAA,WADA;QAEAC,UAFA;QAGAC,gBAHA;QAIAC,iBAJA;QAKAC,SALA;QAMAC,gBANA;QAOAC,iBAPA;QAQAC,eARA;QASAC;MATA;IAVA;EAsBA,CAzBA;;EA0BAC;IACA;EACA,CA5BA;;EA6BAC;IACAC;MACA;QACAC,MACAC,GADA,CAEAC,8DAFA,EAGA,YAHA,EAIA,cAJA,EAMAC,IANA,CAMAC;UACA;QACA,CARA,EASAC,KATA,CASAC;UACA;QACA,CAXA;MAYA,CAbA,MAaA;QACAN,MACAO,IADA,CAEAL,0BACA,YAHA,EAIA,YAJA,EAKA,cALA,EAOAC,IAPA,CAOAC;UACAI;UACA;UACA;QACA,CAXA,EAYAH,KAZA,CAYAC;UACA;QACA,CAdA;MAeA;;MACA;IACA,CAjCA;;IAkCAG;MACAT,MACAU,GADA,CACAR,qCADA,EACA,cADA,EAEAC,IAFA,CAEAC;QACA;QACAI;MACA,CALA;IAMA,CAzCA;;IA0CAG;MACA;;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;QACA;UACAvB,WADA;UAEAC,UAFA;UAGAC,gBAHA;UAIAC,iBAJA;UAKAC,SALA;UAMAC,gBANA;UAOAC,iBAPA;UAQAC,eARA;UASAC;QATA;MAWA;IACA;;EA9DA;AA7BA","names":["name","data","axiosProp","headers","Authorization","perfiles","cambiaPass","labelID","perfilSelected","usuario","nombre","primer_apell","segundo_apell","email","telefono_fijo","telefono_movil","preparacion","perfil","mounted","methods","submitForm","axios","put","process","then","res","catch","err","post","console","getPerfiles","get","onOpenModal"],"sourceRoot":"src/components/modals","sources":["registroUsuarioModal.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-modal\r\n      @show=\"onOpenModal()\"\r\n      v-model=\"$parent.modalRegistroUsuario\"\r\n      id=\"modalRegistroGrupo\"\r\n      title=\"Administración de Usuario\"\r\n      ok-only\r\n      ok-variant=\"danger\"\r\n      ok-title=\"Cancelar\"\r\n    >\r\n      <div class=\"col\">\r\n        <strong>{{ labelID }}</strong>\r\n        <b-form @submit=\"submitForm()\" onsubmit=\"return false\">\r\n          <!---------Campo curp/usuario------->\r\n          <b-form-group label=\"*CURP:\" label-for=\"curp\" description=\"CURP\">\r\n            <b-form-input\r\n              placeholder=\"CURP\"\r\n              required\r\n              id=\"curp\"\r\n              v-model=\"usuario.usuario\"\r\n              :state=\"!(usuario.usuario == '')\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!--------Campo  nombre------>\r\n          <b-form-group\r\n            label=\"*Nombre:\"\r\n            label-for=\"nombre\"\r\n            description=\"Nombre(s) del usuario\"\r\n          >\r\n            <b-form-input\r\n              placeholder=\"Escribe el nombre(s)\"\r\n              id=\"nombre\"\r\n              required\r\n              v-model=\"usuario.nombre\"\r\n              :state=\"!(usuario.nombre == '')\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!--------Campo primer apellido------>\r\n          <b-form-group\r\n            label=\"*Primer Apellido:\"\r\n            label-for=\"primer_apell\"\r\n            description=\"Primer apellido\"\r\n          >\r\n            <b-form-input\r\n              id=\"primer_apell\"\r\n              placeholder=\"Escribe el primer apellido\"\r\n              required\r\n              v-model=\"usuario.primer_apell\"\r\n              :state=\"!(usuario.primer_apell == '')\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!--------Campo segundo apellido------>\r\n          <b-form-group\r\n            label=\"Segundo apellido:\"\r\n            label-for=\"segundo_apell\"\r\n            description=\"Segundo apellido\"\r\n          >\r\n            <b-form-input\r\n              id=\"segundo_apell\"\r\n              placeholder=\"Escribe el segundo apellido\"\r\n              v-model=\"usuario.segundo_apell\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!--------Campo nivel académico ------>\r\n          <b-form-group\r\n            label=\"Nivel académico:\"\r\n            label-for=\"preparacion\"\r\n            description=\"preparacion\"\r\n          >\r\n            <b-form-input\r\n              id=\"nivel\"\r\n              placeholder=\"Escribe el nivel académico\"\r\n              v-model=\"usuario.preparacion\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!---------Campo email------->\r\n          <b-form-group\r\n            label=\"*Email:\"\r\n            label-for=\"email\"\r\n            description=\"Correo electrónico del usuario\"\r\n          >\r\n            <b-form-input\r\n              placeholder=\"Escribe el correo electrónico\"\r\n              required\r\n              id=\"email\"\r\n              type=\"email\"\r\n              v-model=\"usuario.email\"\r\n              :state=\"!(usuario.email == '')\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!---------Campo teléfono fijo------->\r\n          <b-form-group\r\n            label=\"Teléfono fijo:\"\r\n            label-for=\"telefono_fijo\"\r\n            description=\"Teléfono fijo\"\r\n          >\r\n            <b-form-input\r\n              placeholder=\"Escribe el teléfono a 10 dígitos\"\r\n              id=\"telefono_fijo\"\r\n              type=\"number\"\r\n              v-model=\"usuario.telefono_fijo\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!---------Campo teléfono móvil------->\r\n          <b-form-group\r\n            label=\"*Teléfono móvil:\"\r\n            label-for=\"telefono_movil\"\r\n            description=\"Teléfono celular del usuario\"\r\n          >\r\n            <b-form-input\r\n              placeholder=\"Escribe el teléfono a 10 dígitos\"\r\n              required\r\n              id=\"telefono_movil\"\r\n              type=\"number\"\r\n              v-model=\"usuario.telefono_movil\"\r\n              :state=\"!(usuario.telefono_movil == '')\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n          <!---------Campo perfil------->\r\n          <b-form-group\r\n            label=\"*Perfil:\"\r\n            label-for=\"perfil\"\r\n            description=\"Perfil de Usuario\"\r\n          >\r\n            <b-form-select\r\n              v-model=\"usuario.perfil\"\r\n              required\r\n              :options=\"perfiles\"\r\n              value-field=\"_id\"\r\n              text-field=\"perfil\"\r\n              id=\"perfil\"\r\n            >\r\n            </b-form-select>\r\n            <!--------- Opción de cambio de contraseña ---------->\r\n            <b-form-checkbox id=\"cambiaPass\" v-model=\"cambiaPass\" value=\"true\">\r\n              Cambiar password\r\n            </b-form-checkbox>\r\n            <!--------Campo hash/password ------>\r\n            <b-form-group\r\n              v-if=\"cambiaPass\"\r\n              label=\"Password:\"\r\n              label-for=\"hash\"\r\n              description=\"Nueva contraseña\"\r\n            >\r\n              <b-form-input\r\n                id=\"hash\"\r\n                placeholder=\"Escribe una nueva contraseña\"\r\n                v-model=\"usuario.hash\"\r\n              ></b-form-input>\r\n            </b-form-group>\r\n          </b-form-group>\r\n          <b-button type=\"submit\">Guardar</b-button>\r\n        </b-form>\r\n      </div>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"RegistroUsuarioModal\",\r\n  data() {\r\n    return {\r\n      axiosProp: {\r\n        headers: {\r\n          Authorization: \"bearer \" + sessionStorage.getItem(\"token\"),\r\n        },\r\n      },\r\n      perfiles: [],\r\n      cambiaPass: false,\r\n      labelID: \"\",\r\n      perfilSelected: \"\",\r\n      usuario: {\r\n        usuario: \"\",\r\n        nombre: \"\",\r\n        primer_apell: \"\",\r\n        segundo_apell: \"\",\r\n        email: \"\",\r\n        telefono_fijo: 0,\r\n        telefono_movil: 0,\r\n        preparacion: \"\",\r\n        perfil: \"\",\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getPerfiles();\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      if (this.$parent.usuarioSelected) {\r\n        axios\r\n          .put(\r\n            process.env.VUE_APP_URL + `/usuarios/edit/` + this.usuario._id,\r\n            this.usuario,\r\n            this.axiosProp\r\n          )\r\n          .then((res) => {\r\n            this.$bvModal.msgBoxOk(res.data);\r\n          })\r\n          .catch((err) => {\r\n            this.$bvModal.msgBoxOk(err);\r\n          });\r\n      } else {\r\n        axios\r\n          .post(\r\n            process.env.VUE_APP_URL +\r\n              `/usuarios/`,\r\n            this.usuario,\r\n            this.axiosProp\r\n          )\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.$bvModal.msgBoxOk(res.data);\r\n            this.$router.go(0);\r\n          })\r\n          .catch((err) => {\r\n            this.$bvModal.msgBoxOk(err);\r\n          });\r\n      }\r\n      this.$parent.modalRegistroUsuario = false;\r\n    },\r\n    getPerfiles() {\r\n      axios\r\n        .get(process.env.VUE_APP_URL + \"/perfiles\", this.axiosProp)\r\n        .then((res) => {\r\n          this.perfiles = res.data;\r\n          console.log(this.perfiles);\r\n        });\r\n    },\r\n    onOpenModal() {\r\n      this.cambiaPass = false;\r\n      if (this.$parent.usuarioSelected) {\r\n        this.usuario = this.$parent.usuarioSelected;\r\n        this.usuario.hash = \"\";\r\n        this.labelID = this.usuario._id;\r\n      } else {\r\n        this.labelID = \"\";\r\n        this.usuario = {\r\n          usuario: \"\",\r\n          nombre: \"\",\r\n          primer_apell: \"\",\r\n          segundo_apell: \"\",\r\n          email: \"\",\r\n          telefono_fijo: 0,\r\n          telefono_movil: 0,\r\n          preparacion: \"\",\r\n          perfil: \"\",\r\n        };\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}